<h3>My Rides</h3>
Edit rides that are active (those that were published or in draft mode). Create new rides using past rides.<br><br>
<ul class="nav nav-tabs">
<li><%= link_to "Active Rides", events_path %></li>
<li class="active"><%= link_to "Past Rides", past_rides_events_path %></li>
<li><%= link_to "Drafts", drafts_events_path %></li>
</ul>
<br><br>

<%= paginate @events %>
<table class='table table-hover'>
<% @events.each do |event| %>
	<tr id = 'tr-<%= event.id %>'>
		<td>
			<h4 class='title-inline'><%= link_to event.title, event_path(event.id) %> 
			<% if !event.is_private %>
				<span class="glyphicon glyphicon-globe"></span></h4>
			<% else %></h4><% end %>
			<b>Event Occurred On</b> <%= event.event_date.strftime("%A %B %d %Y %H:%M%p") %>
		</td>
		<td class='td_bar warning'>
			<%= link_to raw('<span class="glyphicon glyphicon-edit"></span>'),edit_eventpost_path(event.id), :class => 'icon-lg' %>
		</td>
		<td class='td_bar danger'>
			<a href='#!' class='icon-lg' id = '<%= 'delete-' + event.id %>'><span class="glyphicon glyphicon-remove"></span></a>
			<script>
				$('<%= '#delete-' + event.id %>').click(
					function (event){
						alertify.confirm("Remove Ride <i><%= event.title %></i>?", 
							function (event) {
							    if (event) { // redirect to delete page
							        $.ajax({
							        	url: '<%= event_path(event.id) %>',
							        	type: 'DELETE',
							        }).done(function(){
						        		$('#tr-<%= event.id %>').fadeOut("slow",
						        			function(){console.log("animation done");}
						        		);
						        	}
						        );
							    }
							}
						);
					}
				);
			</script>
		</td>
	</tr>
<% end %>
</table>